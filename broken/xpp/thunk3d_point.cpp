/*+-----------------------------------------------------------------------------------------------------------------+*/
//
// (C) Kriss@XIXs.com 2013
//
/*+-----------------------------------------------------------------------------------------------------------------+*/
#include "all.h"



/*+-----------------------------------------------------------------------------------------------------------------+*/
//
// allocate an point
//
/*+-----------------------------------------------------------------------------------------------------------------+*/
bool t3d_point::setup(void)
{
	DMEM_ZERO(this);

	DHEAD_INIT(morphs);

	return true;
}

/*+-----------------------------------------------------------------------------------------------------------------+*/
//
// allocate an point
//
/*+-----------------------------------------------------------------------------------------------------------------+*/
bool t3d_point::reset(void)
{
	clean();
	return setup();
}

/*+-----------------------------------------------------------------------------------------------------------------+*/
//
// allocate an point
//
/*+-----------------------------------------------------------------------------------------------------------------+*/
void t3d_point::clean(void)
{
}



/*+-----------------------------------------------------------------------------------------------------------------+*/
//
// allocate an point
//
/*+-----------------------------------------------------------------------------------------------------------------+*/
t3d_point *thunk3d::AllocPoint(void)
{
t3d_point *ret;


	if(!(ret=(t3d_point *)points->alloc()))
	{
		DBG_Error("Failed to allocate thunk3D.point.\n");
		goto bogus;
	}

	if(!ret->setup())
	{
		DBG_Error("Failed to setup thunk3D.point.\n");
		goto bogus;
	}

	DLIST_PASTE(points->atoms->last,ret,0);

	return ret;

bogus:
	FreePoint(ret);
	return 0;
}

/*+-----------------------------------------------------------------------------------------------------------------+*/
//
// free an point
//
/*+-----------------------------------------------------------------------------------------------------------------+*/
void thunk3d::FreePoint(t3d_point *item)
{
	if(item)
	{
		DLIST_CUT(item);

		item->clean();

		points->free((llatom*)item);
	}
}



