cd `dirname $0`

echo "linking all .lua fles from the main lua dir so we dont accidently edit multiple copies"

ln -f lua_pegasus/git/src/pegasus/compress.lua  lua/pegasus/compress.lua
ln -f lua_pegasus/git/src/pegasus/handler.lua   lua/pegasus/handler.lua
ln -f lua_pegasus/git/src/pegasus/init.lua      lua/pegasus/init.lua
ln -f lua_pegasus/git/src/pegasus/request.lua   lua/pegasus/request.lua
ln -f lua_pegasus/git/src/pegasus/response.lua  lua/pegasus/response.lua


ln -f lua_socket/git/src/ltn12.lua              lua/ltn12.lua
ln -f lua_socket/git/src/mime.lua               lua/mime.lua
ln -f lua_socket/git/src/socket.lua             lua/socket.lua
ln -f lua_socket/git/src/ftp.lua                lua/socket/ftp.lua
ln -f lua_socket/git/src/headers.lua            lua/socket/headers.lua
ln -f lua_socket/git/src/http.lua               lua/socket/http.lua
ln -f lua_socket/git/src/mbox.lua               lua/socket/mbox.lua
ln -f lua_socket/git/src/smtp.lua               lua/socket/smtp.lua
ln -f lua_socket/git/src/tp.lua                 lua/socket/tp.lua
ln -f lua_socket/git/src/url.lua                lua/socket/url.lua
ln -f lua_sec/git/src/https.lua                 lua/ssl/https.lua
ln -f lua_sec/git/src/ssl.lua                   lua/ssl.lua


ln -f lua_glslang/code/glslang.lua              lua/glslang.lua
ln -f lua_gles/code/gles.lua                    lua/gles.lua
ln -f lua_gles/code/glescode.lua                lua/glescode.lua
ln -f lua_al/code/al.lua                        lua/al.lua
ln -f lua_al/code/alc.lua                       lua/alc.lua
ln -f lua_lanes/lanes/src/lanes.lua             lua/lanes.lua

ln -f lua_midi/code/midi.lua                    lua/wetgenes/midi.lua
ln -f lua_tardis/code/tardis.lua                lua/wetgenes/tardis.lua
ln -f lua_grd/code/grd.lua                      lua/wetgenes/grd.lua
ln -f lua_grd/code/grdmap.lua                   lua/wetgenes/grdmap.lua

ln -f lua_win/code/win.lua                      lua/wetgenes/win.lua
ln -f lua_win_emcc/code/emcc.lua                lua/wetgenes/win/emcc.lua

ln -f lua_v4l2/code/v4l2.lua                    lua/wetgenes/v4l2.lua
ln -f lua_hid/code/hid.lua                      lua/wetgenes/hid.lua
ln -f lua_chipmunk/code/chipmunk.lua            lua/wetgenes/chipmunk.lua
ln -f lua_bullet/code/bullet.lua                lua/wetgenes/bullet.lua
ln -f lua_pack/code/pack.lua                    lua/wetgenes/pack.lua
ln -f lua_fats/code/fats.lua                    lua/wetgenes/fats.lua
ln -f lua_ogg/code/ogg.lua                      lua/wetgenes/ogg.lua
ln -f lua_speak/code/speak.lua                  lua/wetgenes/speak.lua

ln -f lua_raspi_unicornhat/code/unicornhat.lua  lua/raspi/unicornhat.lua




echo "listing all linked files"

find . -xdev ! -type d -links +1 -not -path "./parts/*" -printf '%20D %20i %p\n' | sort -n | uniq -w 42 --all-repeated=separate

