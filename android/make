cd `dirname $0`

andsdk=`readlink -f ../../sdks/android-9-arm`
export PATH=$andsdk/bin:$PATH

cd ..

build/premake4 gmake android

cd build-gmake-android


if [ "$1" = "release" ] ; then
	make config=release_android
else
	make $*
fi

cd ..
cd android


if [ "$1" = "clean" ] ; then

	rm build-gmake-android -Rf

elif [ "$1" = "release" ] ; then

#release is always a full build?

	rm bin/*.apk
	ant uninstall
#	ant clean
	ant release install
else

#deleting the apks seems the onlyway to force a reload of any modified so files...

	rm bin/*.apk
	ant uninstall
	ant debug install

fi
